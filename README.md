# AI_Chat_processing_UnifiedRequest

Практический проект: пайплайн обработки документов **.docx → структурированный .json**  
с использованием LLM и **единой структуры запроса**.

Данная версия является развитием предыдущей практики и фокусируется на:
- унификации интерфейса запроса,
- строгих моделях данных (Pydantic),
- предсказуемом JSON-ответе от ИИ,
- подготовке базы для перехода к агентной архитектуре.


## Контекст и цель проекта

Проект решает ту же задачу, что и предыдущая версия Practice:
- обработка входного документа `.docx`,
- извлечение и подготовка текста,
- получение структурированного результата через LLM.

Ключевое отличие - **один унифицированный запрос** вместо серии независимых запросов,  
что снижает расход токенов и упрощает контроль над логикой.


## Основные изменения по сравнению с предыдущей версией

- удалены токены и чувствительные данные из кода
- переход на **Pydantic** для строгой валидации структур
- единая структура запроса к LLM
- ИИ возвращает **валидный `.json`**
- убрана обработка и проверка файлов из слоя `processing`
- мелкие оптимизации и упрощение кода
- добавлены **плохие примеры** (negative / bad examples) в инструкции для ИИ  
  > для более сложных проектов возможно вынесение `bad_examples`


## Архитектура проекта

### Точка входа
- `solution/run.py` - запуск полного пайплайна обработки

### Основные модули

- `solution/chats_process/`
  - `chats_process.py` - обработка запроса в рамках **единой структуры**

- `solution/config/`
  - `config.py` - конфигурация проекта
  - `prompt_data.json` - инструкции для LLM  
    (включая хорошие и плохие примеры)

- `solution/file_io/`
  - `docx_loader.py` - загрузка `.docx`
  - `json_loader.py` - сохранение результата
  - `txt_writer.py` - вспомогательный вывод

- `solution/models/`
  - `models.py` - **Pydantic-модели** входных и выходных данных

- `solution/processing/`
  - `cleaner.py` - очистка текста
  - `formatter.py` - подготовка данных под единый запрос
  - `llm_api.py` - взаимодействие с LLM
  - `processing.py` - основной пайплайн обработки


## Ключевая идея версии

Вместо множества отдельных запросов:
- формируется **один структурированный запрос**
- модель возвращает **один JSON-ответ**
- данные валидируются через Pydantic

Это:
- снижает стоимость запросов,
- упрощает отладку,
- делает пайплайн более предсказуемым,
- готовит архитектуру к агентному подходу.


## Установка и запуск

```bash
pip install -r requirements.txt
python -m solution.run
```

Все параметры задаются через `solution/config/config.py`

Проект является полноценным проектом и базой для следующего шага -
создания AI-агента, который будет управлять логикой обработки,
контекстом и стратегией запросов поверх унифицированной структуры.
